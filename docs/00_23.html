<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>C++サンプル集</title>
</head>
<body>
<!-- 全体コンテナ　-->
<div id="container">
<header>
<div id="title_words">C++サンプル集</div>
</header>
<!-- コンテンツ　-->
<div id="contents">
<h1>【第1部】C言語（K＆R検証）編</h1>
<h1 class="pagetitle">００２３．行から文字列を検索する</h1>
<h4>ソース紹介</h4>
<div class="box1_title">CPPファイルに記述</div>
<div class="box1">
<pre>
#include &lt;iostream>
#include &lt;cstdio>
#include &lt;string>
using namespace std;

/*
sにおけるtのインデックスを返す。見つからなければ-1
*/
int strindex(const char s[],const char t[]) {
    int i, j, k;
    for (i = 0; s[i] != '\0'; i++) {
        for (j = i, k = 0; t[k] != '\0' && s[j] == t[k]; j++, k++) 
            ;
        if (k > 0 && t[k] == '\0') {
            return i;
        }
    }
    return -1;
}

/*
strindexのテスト
*/
int main()
{
    string str;
    string pattern = "abc";
    while (getline(cin, str)) {
        if (strindex(str.c_str(), pattern.c_str()) >= 0) {
            cout &lt;&lt; str &lt;&lt; endl;
        }
    }
    return 0;
}
</pre>
</div>
<div class="box1_title">出力</div>
　このサンプルでは、<b>テキストファイル</b>を用意し、そのファイルを<b>標準入力</b>に<b>リダイレクト</b>する形で検証したいと思います。まず、コンソールを開き、実行ファイルのあるディレクトリに移動します。その上で<b>abc.txt</b>というファイルを作成して、中に以下を記述します。
<div class="box1_filename">abc.txt</div>
<div class="box1">
<pre>
Hello World
YYYXXXabcKKK
ABCDEFG
XYZabcABC
AabcBCBC
</pre>
</div>
　記述が終わったら、例えば、プログラム名が<b>main.exe</b>だったとして、以下のコマンドを打ち込みます
<div class="box1">
<pre>
> main.exe < abc.txt
</pre>
</div>
　このコマンドは<b>main.exe</b>に対して<b>abc.txt</b>を<b>リダイレクトしなさい</b>というコマンドです。<br/>
　<b>リダイレクト</b>というのは、<b>そのファイルを標準入力にする</b>ということです。すると
<div class="box1">
<pre>
YYYXXXabcKKK
XYZabcABC
AabcBCBC
</pre>
</div>
　という出力が得られます。<b>abc</b>が入っている行だけが抽出されます。
<h4>サンプル説明</h4>
　<b>strindex()関数</b>は、与えられた文字列と、検索する文字列を比較して、最初に、与えられた文字列中に検索する文字列の先頭が出てきたら、そこから、合致してるかどうかを検証します。<br />
　<b> i j k </b>3つの変数をうまく使っているのがわかります。<br />
　<b>C++</b>で記述する場合、<b>string</b>を使えば<b>strindex()関数</b>は必要なくなります。
<h4>ソース紹介</h4>
<div class="box1_title">CPPファイルに記述</div>
<div class="box1">
<pre>
#include &lt;iostream>
#include &lt;cstdio>
#include &lt;string>
using namespace std;

/*
findのテスト
*/
int main()
{
    string str;
    string pattern = "abc";
    while (getline(cin, str)) {
        if (str.find(pattern) != string::npos) {
            cout &lt;&lt; str &lt;&lt; endl;
        }
    }
    return 0;
}
</pre>
</div>
<h4>サンプル説明</h4>
　<b>string</b>には<b>find()関数</b>があり、これを使うと文字列中の文字列を検索できます。
<h4>K&Rでの記述</h4>
　元になったのは<b>第4章:関数とプログラム構造</b>に記述されています。<b>関数についての基本事項</b>の説明のところです。
</div>
<!-- /コンテンツ　-->
<hr>
<!-- フッタ　-->
<footer>
<table>
<tr>
<td><a href="00_22.html">前へ</a></td>
<td><a href="index.html">目次</a></td>
<td><a href="00_24.html">次へ</a></td>
</tr>
</table>
</footer>
<!-- /フッタ　-->
</div>
<!-- /全体コンテナ　-->
</body>
</html>
