<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>C++サンプル集</title>
</head>
<body>
<!-- 全体コンテナ　-->
<div id="container">
<header>
<div id="title_words">C++サンプル集</div>
</header>
<!-- コンテンツ　-->
<div id="contents">
<h1>【第1部】C言語（K＆R検証）編</h1>
<h1 class="pagetitle">００２１．整数を文字列にする</h1>
<h4>ソース紹介</h4>
　これまで<b>atoi()関数（文字列から数字への変換）</b>は何度か出てきましたが、今回のは<b>整数から文字列</b>への変換です。
<div class="box1_title">CPPファイルに記述</div>
<div class="box1">
<pre>
#include &lt;iostream>
#include &lt;cstdio>
using namespace std;

/*
文字列sを逆順にする
*/
void reverse(char s[]) {
    for (int i = 0, j = (int)strlen(s) - 1; i &lt; j; i++, j--) {
        char c = s[i];
        s[i] = s[j];
        s[j] = c;
    }
}

/*
nをs中の数字文字列に変換する
*/
void itoa(int n, char s[]) {
    int i, sign;
    if ((sign = n) &lt; 0) {
        //マイナスの場合はnを正にする
        n = -n;
    }
    i = 0;
    //数字を逆順に生成する
    do {
        //次の桁をとってくる
        s[i++] = n % 10 + '0';
    } while ((n /= 10) > 0); //その桁を削除
    if (sign &lt; 0) {
        s[i++] = '-';
    }
    s[i] = '\0';
    reverse(s);
}

/*
itoaのテスト
*/
int main()
{
    //大きめにバッファを用意する
    char str[100];
    itoa(123, str);
    cout &lt;&lt; str &lt;&lt; endl;
    itoa(-4567, str);
    cout &lt;&lt; str &lt;&lt; endl;
    itoa(0, str);
    cout &lt;&lt; str &lt;&lt; endl;
    return 0;
}
</pre>
</div>
<div class="box1_title">出力</div>
<div class="box1">
<pre>
123
-4567
0
</pre>
</div>
<h4>サンプル説明</h4>
　ここでは前項で使用した<b>reverse()関数</b>が使われています。<br />
　<b>itoa()関数</b>は<b>一度は通ってほしい</b>ループを使用します。すなわち<b>do-whileループ</b>です。<br />
　<b>whileやfor</b>だと、条件によっては<b>一度も通らない</b>場合があります。<b>itoa()関数</b>の場合は<b>必ず整数が渡される</b>ことは決まっているので、<b>1度は必ず処理する</b>ほうが実装しやすいわけです。<br />
　<b>C++</b>で記述する場合<b>cout</b>がすでに<b>itoa()関数</b>の機能を持っています。
<h4>ソース紹介</h4>
<div class="box1_title">CPPファイルに記述</div>
<div class="box1">
<pre>
#include &lt;iostream>
#include &lt;cstdio>
using namespace std;

/*
coutのテスト
*/
int main()
{
    cout &lt;&lt; 123 &lt;&lt; endl;
    cout &lt;&lt; -4567 &lt;&lt; endl;
    cout &lt;&lt; 0 &lt;&lt; endl;
    return 0;
}
</pre>
</div>
　しかし<b>出力する</b>場合以外もあると思います。例えば<b>int</b>を<b>string</b>に変換する場合は
<h4>ソース紹介</h4>
<div class="box1_title">CPPファイルに記述</div>
<div class="box1">
<pre>
#include &lt;iostream>
#include &lt;cstdio>
#include &lt;string>
using namespace std;

/*
to_stringのテスト
*/
int main()
{
    string str = to_string(123);
    cout &lt;&lt; str &lt;&lt; endl;
    str = to_string(-4567);
    cout &lt;&lt; str &lt;&lt; endl;
    str = to_string(0);
    cout &lt;&lt; str &lt;&lt; endl;
    return 0;
}
</pre>
</div>
　のように<b>to_string()</b>を使えます。この例では<b>str</b>を<b>cout</b>してますが、出力せずに内部処理に使うことも可能です。
<h4>K&Rでの記述</h4>
　元になったのは<b>第3章:制御の流れ</b>に記述されています。<b>ループ（do-while）</b>の説明のところです。
</div>
<!-- /コンテンツ　-->
<hr>
<!-- フッタ　-->
<footer>
<table>
<tr>
<td><a href="00_20.html">前へ</a></td>
<td><a href="index.html">目次</a></td>
<td><a href="00_22.html">次へ</a></td>
</tr>
</table>
</footer>
<!-- /フッタ　-->
</div>
<!-- /全体コンテナ　-->
</body>
</html>
